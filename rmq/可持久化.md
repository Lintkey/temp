## 实现细节

可持久化的实现依靠历史信息和动态开点。如果结构深度有限($\log$ 或小常数等)，历史信息可复用，能动态开点，那么均可尝试持久化。例如线段树($\log n$)、`0-1`字典树(${\rm sizeof}(val)$)、可并堆($\log n$)、二叉堆($\log n$)

## 静态数据二元信息查询

通常的结构只支持一元信息查询：查询某区间内满足固定条件的数据、查询所有数据中满足某条件的数据，而无法做到二元信息查询——查询某区间内满足某条件的数据。

而持久化结构则能实现这一点。构建线段树维护所有数据满足某条件的数据，使用历史版本差实现区间查询。

经典例子是查询区间第k小，线段树维护离散后 $v_{min}\le x<v_{max}$ 的数据数量，使用历史版本差实现区间查询

## 可持久化并查集

这里所提的并查集是按秩合并的并查集。使用可持久化线段树仅需维护两个数据`rnk[n]`和`far[n]`，每次操作都是两次单点查询(左、右节点的根节点及其秩)，两次单点修改(一次改小节点`far`，一次改大节点`rnk`)